<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Puntos - Rincón de Labores</title>
    <style>
        :root {
            --color-principal: #5e4485; /* Morado, Rincón de Labores */
            --color-alerta: #e74c3c;
            --color-exito: #2ecc71;
            --fuente-principal: sans-serif;
        }

        body {
            font-family: var(--fuente-principal);
            background-color: #ffffff;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: var(--color-principal);
            text-align: center;
            border-bottom: 3px solid var(--color-principal);
            padding-bottom: 10px;
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
            color: var(--color-principal);
        }

        input[type="number"], select, button {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        button {
            background-color: var(--color-principal);
            color: white;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 20px;
        }

        button:hover {
            background-color: #4b356a;
        }

        .input-group {
            border: 1px solid var(--color-principal);
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        #resultado {
            margin-top: 25px;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid var(--color-exito);
            background-color: #f6fff9;
        }

        #resultado h3 {
            color: var(--color-exito);
            margin-top: 0;
        }

        .aviso {
            padding: 10px;
            margin-top: 15px;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }

        #aviso-tapeta {
            background-color: #f9e7e7;
            border-left: 5px solid var(--color-alerta);
            color: var(--color-alerta);
            display: none;
        }

        #nota-largo {
            background-color: #e9f7ef;
            border-left: 5px solid var(--color-principal);
            color: #4b356a;
            margin-top: 10px;
            display: none;
        }
        
        .footer-info {
            text-align: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
            font-size: 0.9em;
            color: #666;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Calcula tus puntos con Rincón de Labores 🧶</h1>
    <p>Introduce tu muestra de tensión y calcula los puntos necesarios para tu proyecto.</p>
    
    <div class="input-group">
        <h2>Paso 1: Tu Muestra de Tensión</h2>
        <label for="puntos10cm">Puntos que has contado en 10 cm:</label>
        <input type="number" id="puntos10cm" min="1" placeholder="Ej: 22" required>
    </div>

    <div class="input-group">
        <h2>Paso 2: Selección del Proyecto</h2>
        
        <label>¿Qué vas a calcular?</label>
        <select id="tipo-proyecto">
            <option value="jersey">Jersey (Prenda Cerrada)</option>
            <option value="chaqueta">Chaqueta (Prenda Abierta)</option>
            <option value="manual">Centímetros Deseados (Medida Manual)</option>
        </select>
        
        <div id="selectores-prenda" style="display:none;">
            
            <label for="pieza-tejida">Pieza a tejer:</label>
            <select id="pieza-tejida">
                <option value="espalda">Espalda</option>
                <option value="delantero">Delantero</option>
                <option value="manga">Manga (Empezando por el Puño)</option>
            </select>

            <label for="talla">Selecciona la Talla:</label>
            <select id="talla">
                <optgroup label="Bebé">
                    <option value="0m">0 Meses</option>
                    <option value="3m">3 Meses</option>
                    <option value="6m">6 Meses</option>
                    <option value="9m">9 Meses</option>
                    <option value="12m">12 Meses</option>
                    <option value="18m">18 Meses</option>
                    <option value="24m">24 Meses</option>
                </optgroup>
                <optgroup label="Niño/a">
                    <option value="3a">3 Años</option>
                    <option value="4a">4 Años</option>
                    <option value="5a">5 Años</option>
                    <option value="6a">6 Años</option>
                </optgroup>
                <optgroup label="Adulto">
                    <option value="xs">XS</option>
                    <option value="s">S</option>
                    <option value="m">M</option>
                    <option value="l">L</option>
                    <option value="xl">XL</option>
                    <option value="xxl">XXL</option>
                </optgroup>
            </select>
        </div>

        <div id="manual-input" style="display:none;">
            <label for="cm-deseados">Centímetros de ancho deseados (cm):</label>
            <input type="number" id="cm-deseados" min="1" placeholder="Ej: 50">
        </div>
    </div>

    <button onclick="calcularPuntos()">Calcular Puntos Necesarios</button>

    <div id="resultado" style="display:none;">
        <h3>Resultado del Cálculo</h3>
        <p>Para tejer **<span id="resultado-cm"></span>** con tu muestra (10 cm = <span id="resultado-muestra"></span> puntos), necesitas:</p>
        <h2><span id="puntos-finales"></span> PUNTOS</h2>
        
        <div id="aviso-tapeta" class="aviso">
            ⚠️ **AVISO IMPORTANTE (Tapeta):** El cálculo es para **UNA** de las dos piezas del delantero. Recuerda añadir los **puntos extra** necesarios para la tapeta (el borde de botones/ojales) a esta pieza.
        </div>

        <div id="nota-largo" class="aviso">
            📏 **Largo Recomendado:** Para la pieza **<span id="pieza-final"></span>** en talla **<span id="talla-final"></span>**, el largo recomendado es de **<span id="largo-recomendado"></span> cm**.
        </div>
    </div>
    
    <div class="footer-info">
        <p>Una herramienta de **Rincón de Labores** | Contacto: <a href="mailto:rincondelabores@gmail.com">rincondelabores@gmail.com</a></p>
    </div>
</div>

<script>
    // --- BASE DE DATOS DE TALLAS ---
    // Formato: [Ancho_Total_Cuerpo, Largo_Cuerpo, Ancho_Puño, Largo_Manga]
    const TALLAS_BD = {
        '0m':   [41, 22, 11, 15], 
        '3m':   [45, 25, 11, 16], 
        '6m':   [49, 28, 11, 19], 
        '9m':   [52, 31, 12, 21], 
        '12m':  [54, 33, 12, 22], 
        '18m':  [55, 34, 12, 23], 
        '24m':  [56, 36, 13, 25], 
        '3a':   [60, 38, 14, 28], 
        '4a':   [64, 41, 15, 31],
        '5a':   [67, 44, 16, 34],
        '6a':   [70, 47, 17, 37],
        'xs':   [84, 57, 18, 56],
        's':    [92, 60, 19, 58],
        'm':    [100, 63, 20, 60],
        'l':    [108, 66, 21, 62],
        'xl':   [118, 68, 22, 63],
        'xxl':  [128, 70, 23, 64],
    };

    // Mapeo para nombres
    const NOMBRES = {
        '0m': '0 Meses', '3m': '3 Meses', '6m': '6 Meses', '9m': '9 Meses', '12m': '12 Meses', '18m': '18 Meses', '24m': '24 Meses',
        '3a': '3 Años', '4a': '4 Años', '5a': '5 Años', '6a': '6 Años',
        'xs': 'XS', 's': 'S', 'm': 'M', 'l': 'L', 'xl': 'XL', 'xxl': 'XXL',
        'delantero': 'Delantero', 'espalda': 'Espalda', 'manga': 'Manga',
    };
    
    // Función para manejar el cambio en el selector de proyecto (Control de visibilidad)
    document.getElementById('tipo-proyecto').addEventListener('change', handleTipoProyectoChange);

    function handleTipoProyectoChange() {
        const tipo = document.getElementById('tipo-proyecto').value;
        const selectoresPrendaDiv = document.getElementById('selectores-prenda');
        const manualInputDiv = document.getElementById('manual-input');

        if (tipo === 'manual') {
            selectoresPrendaDiv.style.display = 'none';
            manualInputDiv.style.display = 'block';
        } else {
            selectoresPrendaDiv.style.display = 'block';
            manualInputDiv.style.display = 'none';
        }
        document.getElementById('resultado').style.display = 'none';
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        handleTipoProyectoChange(); 
    });


    /**
     * Función principal para realizar el cálculo de puntos.
     */
    function calcularPuntos() {
        const puntos10cm = parseFloat(document.getElementById('puntos10cm').value);
        const tipoProyecto = document.getElementById('tipo-proyecto').value;
        
        let cmDeseados = 0;
        let largoRecomendado = 'N/A';
        let nombreTalla = '';
        let piezaTejida = '';

        if (isNaN(puntos10cm) || puntos10cm <= 0) {
            alert("Por favor, introduce un número de puntos válido para 10 cm.");
            return;
        }

        const ratioPuntoCM = puntos10cm / 10;
        
        if (tipoProyecto === 'manual') {
            // --- MODO MANUAL ---
            cmDeseados = parseFloat(document.getElementById('cm-deseados').value);
            if (isNaN(cmDeseados) || cmDeseados <= 0) {
                alert("Por favor, introduce los centímetros deseados para la medida manual.");
                return;
            }
            piezaTejida = 'Centímetros Deseados';
            
        } else {
            // --- MODO PRENDA DEFINIDA ---
            const talla = document.getElementById('talla').value;
            piezaTejida = document.getElementById('pieza-tejida').value;
            const datosTalla = TALLAS_BD[talla];
            
            nombreTalla = NOMBRES[talla];
            
            // Lógica de cálculo de CM y largo según la pieza
            switch (piezaTejida) {
                case 'espalda':
                case 'delantero': // El delantero es la mitad del ancho del cuerpo
                    cmDeseados = datosTalla[0] / 2; 
                    largoRecomendado = datosTalla[1]; // Largo del Cuerpo
                    break;
                case 'manga':
                    cmDeseados = datosTalla[2]; // Circunferencia de Puño
                    largoRecomendado = datosTalla[3]; // Largo de la Manga
                    break;
            }
        }

        // 3. Realizar el Cálculo principal
        const puntosNecesarios = Math.round(cmDeseados * ratioPuntoCM);

        // 4. Mostrar Resultados
        document.getElementById('resultado').style.display = 'block';
        document.getElementById('puntos-finales').textContent = puntosNecesarios;
        document.getElementById('resultado-muestra').textContent = puntos10cm;

        let textoCm;
        if (tipoProyecto === 'manual') {
            textoCm = `${cmDeseados} cm`;
        } else {
            textoCm = `${cmDeseados} cm (Talla ${nombreTalla}, Pieza: ${NOMBRES[piezaTejida]})`;
        }
        document.getElementById('resultado-cm').textContent = textoCm;
        
        // 5. Mostrar Avisos y Notas
        
        // Aviso de Tapeta (Solo si es Chaqueta Y Delantero)
        const avisoTapeta = document.getElementById('aviso-tapeta');
        avisoTapeta.style.display = (tipoProyecto === 'chaqueta' && piezaTejida === 'delantero') ? 'block' : 'none';

        // Nota de Largo (Solo si NO es Manual)
        const notaLargo = document.getElementById('nota-largo');
        if (tipoProyecto !== 'manual') {
            document.getElementById('talla-final').textContent = nombreTalla;
            document.getElementById('pieza-final').textContent = NOMBRES[piezaTejida];
            document.getElementById('largo-recomendado').textContent = largoRecomendado;
            notaLargo.style.display = 'block';

            if (piezaTejida === 'manga') {
                document.getElementById('nota-largo').innerHTML = `📏 Largo recomendado para la manga de la talla ${nombreTalla}**,desde el puño hasta la sisa es de *${largoRecomendado} cm.`;
            } else {
                 document.getElementById('nota-largo').innerHTML = `📏 Largo recoemndado para  ${NOMBRES[piezaTejida]} en talla ${nombreTalla}desde el hombro al bajo es de ${largoRecomendado} cm.`;
            }
        } else {
            notaLargo.style.display = 'none';
            avisoTapeta.style.display = 'none';
        }

        document.getElementById('resultado').scrollIntoView({ behavior: 'smooth' });
    }
</script>

</body>
</html>